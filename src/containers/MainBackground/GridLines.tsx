import { sloganAnimationOrder } from "containers/sections/Slogan";
import { motion, useAnimation, useScroll } from "framer-motion";
import { memo, useEffect, useMemo } from "react";

const GridLines = ({ width, height, parentRef }) => {
  const { scrollYProgress } = useScroll({
    target: parentRef,
    offset: ["start end", "end end"],
  });
  const showLargeNovaItemCtrl = useAnimation();

  useEffect(() => {
    let started = false;
    scrollYProgress.on("change", async (v) => {
      if (v >= sloganAnimationOrder.final && !started) {
        showLargeNovaItemCtrl.start("after");
        started = true;
      } else if (v <= sloganAnimationOrder.final && started) {
        showLargeNovaItemCtrl.start("initial");
        started = false;
      }
    });
    return () => {
      try {
        showLargeNovaItemCtrl.stop();
      } catch (error) {}
    };
  }, [scrollYProgress]);

  const { scale, translateX, translateY } = useMemo(() => {
    const designWidth = 1440;
    const designHeight = 800;

    // Calculate scale factors
    let scaleX = width / designWidth;
    let scaleY = height / designHeight;

    // Use the smaller scale factor to keep the aspect ratio
    let scale = Math.min(scaleX, scaleY);

    // Centre the design if the aspect ratios don't match
    let translateX = (width - designWidth * scale) / 2;
    let translateY = (height - designHeight * scale) / 2;

    return {
      scale,
      translateX,
      translateY,
    };
  }, [width, height]);

  return (
    <g
      transform={`translate(${translateX}, ${translateY}) scale(${scale},${scale})`}
    >
      <motion.path
        opacity={0.2}
        stroke="#576176"
        strokeWidth= {2}
        strokeDasharray="8 4"
        d="M35.5 39L242.5 131M35.5 39L165.5 203M35.5 39L612.5 35M35.5 39L340 -95M35.5 39L3.5 -75L-106.5 95.5M35.5 39L-106.5 95.5M242.5 131L165.5 203M242.5 131L612.5 35M242.5 131L516.5 185M165.5 203L-106.5 95.5M165.5 203L90.5 454M165.5 203L516.5 185M165.5 203L333.5 361M612.5 35L516.5 185M612.5 35L645 -30.5M612.5 35L340 -95M612.5 35L873.5 93M612.5 35L626.5 315M612.5 35L811.5 280M612.5 35L831 -75M516.5 185L626.5 315M516.5 185L333.5 361M645 -30.5L340 -95M645 -30.5L831 -75M-106.5 95.5L90.5 454M-106.5 95.5V477.5M90.5 454L333.5 361M90.5 454L301.5 600M90.5 454L-106.5 477.5M90.5 454L76.5 716M626.5 315L333.5 361M626.5 315L430.5 496M626.5 315L721.5 528M626.5 315L841.5 482M626.5 315L811.5 280M333.5 361L430.5 496M333.5 361L301.5 600M430.5 496L301.5 600M430.5 496L518.5 664M430.5 496L721.5 528M301.5 600L179.5 818M301.5 600L76.5 716M301.5 600L518.5 664M301.5 600L242.5 837M-106.5 477.5L76.5 716M-106.5 477.5L35.5 745M-106.5 477.5L-104.5 897.5M76.5 716L35.5 745M76.5 716L179.5 818M35.5 745L-104.5 897.5M35.5 745L179.5 818M35.5 745L165.5 909M-104.5 897.5L165.5 909M-104.5 897.5L90.5 1160M-104.5 897.5C-96 991.333 -80 1188 -80 1188M179.5 818L242.5 837M179.5 818L165.5 909M242.5 837L518.5 664M242.5 837L333.5 1067M242.5 837L516.5 891M242.5 837L165.5 909M518.5 664L721.5 528M518.5 664L516.5 891M518.5 664L612.5 741M721.5 528L841.5 482M721.5 528L612.5 741M721.5 528L686.5 734M841.5 482L1018.5 393M841.5 482L954.5 630M841.5 482L686.5 734M841.5 482L811.5 280M1018.5 393L1201.5 199M1018.5 393L811.5 280M1018.5 393L1152.5 598M1018.5 393L922.5 221M1018.5 393L1233.5 456M1018.5 393L954.5 630M1201.5 199L1359.5 95M1201.5 199L922.5 221M1201.5 199L1080.5 39M1201.5 199L1259.5 -50.5M1201.5 199L1391.5 329M1201.5 199L1233.5 456M1359.5 95L1446 -45M1359.5 95L1534.5 72M1359.5 95L1259.5 -50.5M1359.5 95L1391.5 329M1446 -45L1534.5 72M1446 -45L1259.5 -50.5M1534.5 72L1391.5 329M1534.5 72L1550.5 474M1259.5 -50.5L1080.5 39M1259.5 -50.5L831 -75M1080.5 39L873.5 93M1080.5 39L831 -75M1080.5 39L922.5 221M873.5 93L922.5 221M873.5 93L811.5 280M873.5 93L831 -75M922.5 221L811.5 280M1152.5 598L1327.5 834M1152.5 598L1233.5 456M1152.5 598L1359.5 801M1152.5 598L954.5 630M1152.5 598L1080.5 745M1327.5 834L1391.5 1035M1327.5 834L1359.5 801M1327.5 834L1201.5 905M1327.5 834L1080.5 745M1327.5 834L1504.5 905M1391.5 1035L1233.5 1162M1391.5 1035L1504.5 905M1391.5 1035L1201.5 905M1391.5 1035L1491.5 1141M1233.5 1162L1152.5 1304M1233.5 1162L1018.5 1099M1233.5 1162L1201.5 905M1233.5 1162L1491.5 1141M1233.5 1162L1425.5 1338M1152.5 1304L1080.5 1447M1152.5 1304L954.5 1336M1152.5 1304L1018.5 1099M1152.5 1304L1359.5 1503M1152.5 1304L1425.5 1338M1152.5 1304L1327.5 1540M1080.5 1447L1201.5 1607M1080.5 1447L954.5 1336M1080.5 1447L873.5 1506M1080.5 1447L922.5 1629M1080.5 1447L1327.5 1540M1201.5 1607L1018.5 1801M1201.5 1607L922.5 1629M1201.5 1607L1327.5 1540M1201.5 1607L1391.5 1737M1201.5 1607L1233.5 1864M1018.5 1801L922.5 1629M1018.5 1801L1233.5 1864M1018.5 1801L954.5 2038M1018.5 1801L1152.5 2006M1018.5 1801L841.5 1890M922.5 1629L811.5 1688M922.5 1629L873.5 1506M922.5 1629L841.5 1890M811.5 1688L873.5 1506M811.5 1688L686.5 1440M811.5 1688L626.5 1723M811.5 1688L841.5 1890M873.5 1506L686.5 1440M873.5 1506L954.5 1336M686.5 1440L612.5 1443M686.5 1440L954.5 1336M686.5 1440L721.5 1234M686.5 1440L626.5 1723M612.5 1443L518.5 1370M612.5 1443L721.5 1234M612.5 1443L516.5 1593M612.5 1443L626.5 1723M518.5 1370L430.5 1202M518.5 1370L721.5 1234M518.5 1370L301.5 1306M518.5 1370L409 1449.5M518.5 1370L516.5 1593M430.5 1202L333.5 1067M430.5 1202L721.5 1234M430.5 1202L626.5 1021M430.5 1202L301.5 1306M333.5 1067L626.5 1021M333.5 1067L516.5 891M333.5 1067L165.5 909M333.5 1067L90.5 1160M333.5 1067L301.5 1306M516.5 891L612.5 741M516.5 891L626.5 1021M612.5 741L686.5 734M612.5 741L626.5 1021M686.5 734L873.5 800M686.5 734L954.5 630M686.5 734L626.5 1021M686.5 734L811.5 986M873.5 800L922.5 927M873.5 800L1080.5 745M873.5 800L954.5 630M873.5 800L811.5 986M922.5 927L811.5 986M922.5 927L1201.5 905M922.5 927L1080.5 745M922.5 927L1018.5 1099M811.5 986L1018.5 1099M811.5 986L626.5 1021M811.5 986L841.5 1188M1018.5 1099L1201.5 905M1018.5 1099L841.5 1188M1018.5 1099L954.5 1336M1201.5 905L1080.5 745M1080.5 745L954.5 630M1391.5 329L1233.5 456M1391.5 329L1550.5 474M1391.5 329L1425.5 632M1233.5 456L1425.5 632M1233.5 456L1359.5 801M1550.5 474L1425.5 632M1550.5 474L1568.5 728M1425.5 632L1359.5 801M1425.5 632L1568.5 728M1359.5 801L1568.5 728M1359.5 801L1504.5 905M1568.5 728L1504.5 905M1504.5 905L1491.5 1141M626.5 1021L841.5 1188M626.5 1021L721.5 1234M1491.5 1141L1425.5 1338M1491.5 1141L1485.5 1476M1425.5 1338L1359.5 1503M1425.5 1338L1485.5 1476M954.5 1336L841.5 1188M954.5 1336L721.5 1234M841.5 1188L721.5 1234M626.5 1723L516.5 1593M626.5 1723L721.5 1936M626.5 1723L841.5 1890M626.5 1723L333.5 1769M626.5 1723L430.5 1904M516.5 1593L242.5 1539M516.5 1593L409 1449.5M516.5 1593C455.064 1650.56 332.453 1766.35 333.5 1769M1359.5 1503L1327.5 1540M1359.5 1503L1485.5 1476M1359.5 1503L1472 1650M1327.5 1540L1472 1650M1327.5 1540L1391.5 1737M1485.5 1476L1472 1650M1472 1650L1391.5 1737M1472 1650V1829M1391.5 1737L1233.5 1864M1391.5 1737L1472 1829M1233.5 1864L1472 1829M1233.5 1864L1425.5 2040M1233.5 1864L1483.5 1949.5M1233.5 1864L1152.5 2006M1472 1829L1483.5 1949.5M1425.5 2040L1483.5 1949.5M1425.5 2040L1152.5 2006M1425.5 2040L1359.5 2209M1425.5 2040L1483.5 2106.5M1483.5 1949.5V2106.5M1152.5 2006L954.5 2038M1152.5 2006L1080.5 2153M1152.5 2006L1359.5 2209M954.5 2038L841.5 1890M954.5 2038L686.5 2142M954.5 2038L721.5 1936M954.5 2038C927.5 2089.83 873.5 2196.4 873.5 2208M954.5 2038L1080.5 2153M841.5 1890L721.5 1936M721.5 1936L686.5 2142M721.5 1936L430.5 1904M721.5 1936L518.5 2072M721.5 1936L612.5 2149M686.5 2142L612.5 2149M686.5 2142L626.5 2429M686.5 2142L811.5 2394M686.5 2142L873.5 2208M612.5 2149L518.5 2072M612.5 2149L516.5 2299M612.5 2149L626.5 2429M518.5 2072L430.5 1904M518.5 2072L301.5 2008M518.5 2072L242.5 2245M518.5 2072L516.5 2299M430.5 1904L333.5 1769M430.5 1904L301.5 2008M333.5 1769L165.5 1611M333.5 1769L242.5 1539M333.5 1769L90.5 1862M333.5 1769L301.5 2008M165.5 1611L242.5 1539M165.5 1611L179.5 1524M165.5 1611L35.5 1447M165.5 1611L90.5 1862M242.5 1539L179.5 1524M242.5 1539L301.5 1306M242.5 1539L409 1449.5M179.5 1524L301.5 1306M179.5 1524L76.5 1422M179.5 1524L35.5 1447M301.5 1306L90.5 1160M301.5 1306L76.5 1422M301.5 1306L409 1449.5M90.5 1160L165.5 909M90.5 1160L76.5 1422M90.5 1160C33.3333 1172.33 -80 1188 -80 1188M76.5 1422L35.5 1447M76.5 1422L-80 1188M35.5 1447L90.5 1862M35.5 1447L-80 1188M35.5 1447L-104.5 1714M35.5 1447C35.5 1447 -67.1967 1442.73 -133 1440M90.5 1862L301.5 2008M90.5 1862L-104.5 1714M90.5 1862L-80 1915.5M90.5 1862L76.5 2124M301.5 2008L76.5 2124M301.5 2008L179.5 2226M301.5 2008L242.5 2245M76.5 2124L35.5 2153M76.5 2124L-80 1915.5M76.5 2124L179.5 2226M35.5 2153L179.5 2226M35.5 2153L-80 1915.5M35.5 2153L165.5 2317M35.5 2153L-104.5 2278M179.5 2226L242.5 2245M179.5 2226L165.5 2317M242.5 2245L165.5 2317M242.5 2245L516.5 2299M165.5 2317L516.5 2299M165.5 2317L-104.5 2278M165.5 2317L90.5 2568M165.5 2317L333.5 2475M516.5 2299L626.5 2429M516.5 2299L430.5 2610M516.5 2299L333.5 2475M626.5 2429L811.5 2394M626.5 2429L841.5 2596M626.5 2429L721.5 2642M626.5 2429L430.5 2610M811.5 2394L922.5 2335M811.5 2394L873.5 2208M811.5 2394C823.667 2460.24 846.7 2593.39 841.5 2596M811.5 2394L1018.5 2507M922.5 2335L873.5 2208M922.5 2335L1080.5 2153M922.5 2335L1201.5 2313M922.5 2335L1018.5 2507M873.5 2208L1080.5 2153M1080.5 2153L1359.5 2209M1080.5 2153L1201.5 2313M1080.5 2153L1327.5 2242M1359.5 2209L1327.5 2242M1359.5 2209L1483.5 2106.5M1359.5 2209L1461 2267M1327.5 2242L1201.5 2313M1327.5 2242L1461 2267M1327.5 2242L1391.5 2443M1201.5 2313L1391.5 2443M1201.5 2313L1018.5 2507M1201.5 2313L1233.5 2570M1391.5 2443L1233.5 2570M1391.5 2443L1472 2394M1391.5 2443L1461 2267M1391.5 2443L1485.5 2596M1233.5 2570L1018.5 2507M1233.5 2570L1425.5 2746M1233.5 2570L1485.5 2596M1233.5 2570L1152.5 2712M1018.5 2507L841.5 2596M1018.5 2507L1152.5 2712M1018.5 2507C997.167 2583.5 954.5 2738 954.5 2744M841.5 2596L721.5 2642M841.5 2596L954.5 2744M721.5 2642L430.5 2610M721.5 2642L686.5 2848M721.5 2642L954.5 2744M721.5 2642L518.5 2778M430.5 2610L333.5 2475M430.5 2610L301.5 2714M430.5 2610L518.5 2778M333.5 2475L90.5 2568M333.5 2475L301.5 2714M90.5 2568L301.5 2714M90.5 2568L-104.5 2278M90.5 2568L76.5 2830M90.5 2568L-116.5 2684M301.5 2714L76.5 2830M301.5 2714L349 2855M301.5 2714L518.5 2778M76.5 2830L179.5 2932M76.5 2830L-116.5 2684M76.5 2830L349 2855M76.5 2830L-80 2914M179.5 2932L349 2855M179.5 2932L-80 2914M518.5 2778L686.5 2848M518.5 2778L349 2855M686.5 2848L873.5 2914M686.5 2848L954.5 2744M873.5 2914L954.5 2744M873.5 2914L1327.5 2948M873.5 2914L1152.5 2712M954.5 2744L1152.5 2712M1152.5 2712L1425.5 2746M1152.5 2712L1327.5 2948M1425.5 2746L1327.5 2948M1425.5 2746L1485.5 2596M1425.5 2746L1510 2778M1327.5 2948L1510 2778M1327.5 2948L1461 3069L1510 2778M-80 1188C-80 1188 -112.302 1341.59 -133 1440M-104.5 1714C-104.5 1714 -121.87 1547 -133 1440M-104.5 1714L-80 1915.5M-80 1915.5L-104.5 2278M-104.5 2278L-116.5 2684M1483.5 2106.5L1461 2267M1461 2267L1472 2394M1472 2394L1485.5 2596M1485.5 2596L1510 2778M-116.5 2684L-80 2914"
      />
    </g>
  );
};
export default memo(GridLines);
